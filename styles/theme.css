:root {
  --brand-background: #f1f5f9; /* slate-100 */
  --brand-surface: #ffffff; /* white */
  --brand-primary: #4f46e5; /* indigo-600 */
  --brand-secondary: #0ea5e9; /* sky-500 */
  --brand-text-primary: #1e293b; /* slate-800 */
  --brand-text-secondary: #64748b; /* slate-500 */
}

.theme-dark {
  --brand-background: #071025; /* darker slate */
  --brand-surface: #0b2136; /* slightly lighter card surface */
  --brand-primary: #6366f1; /* indigo-500 */
  --brand-secondary: #60a5fa; /* sky-400 */
  --brand-text-primary: #e6eef8; /* light text */
  --brand-text-secondary: #9fb4d6; /* muted light */
}

/* Smooth transition for theme changes */
html, body {
  transition: background-color 200ms ease, color 200ms ease;
}

/* Ensure Tailwind utilities that rely on colors inherit from CSS variables */
.bg-brand-background { background-color: var(--brand-background) !important; }
.bg-brand-surface { background-color: var(--brand-surface) !important; }
.text-brand-text-primary { color: var(--brand-text-primary) !important; }
.text-brand-text-secondary { color: var(--brand-text-secondary) !important; }
.text-brand-primary { color: var(--brand-primary) !important; }
.bg-brand-primary { background-color: var(--brand-primary) !important; }
.bg-brand-secondary { background-color: var(--brand-secondary) !important; }

/* Dark mode tweaks: make card surfaces distinguishable from background */
.theme-dark .bg-brand-surface,
.theme-dark .bg-white {
  background-color: var(--brand-surface) !important;
}

/* Lighten common "card" gray utilities slightly in dark mode so they stand out */
.theme-dark .bg-gray-50 { background-color: rgba(255,255,255,0.03) !important; }
.theme-dark .bg-gray-100 { background-color: rgba(255,255,255,0.04) !important; }
.theme-dark .bg-gray-200 { background-color: rgba(255,255,255,0.06) !important; }

/* Ensure items that use gray backgrounds keep readable labels in dark mode */
.theme-dark .bg-gray-50,
.theme-dark .bg-gray-100,
.theme-dark .bg-gray-200,
.theme-dark .bg-gray-300 {
  color: var(--brand-text-primary) !important;
}

/* For elements that intentionally use gray backgrounds for neutral UI controls,
   make their textual labels darker for contrast as requested (e.g., account buttons).
   We set the label color to near-black on those gray backgrounds to improve legibility. */
.theme-dark .bg-gray-200,
.theme-dark .bg-gray-100 {
  --card-label-color: #000000;
}
.theme-dark .bg-gray-200 .text-sm.font-medium,
.theme-dark .bg-gray-100 .text-sm.font-medium,
.theme-dark .bg-gray-200 label,
.theme-dark .bg-gray-100 label {
  color: var(--card-label-color) !important;
}

/* Unified section styling: make all section-like utility backgrounds match the
   card surface and use white text for legibility in dark mode. This simplifies
   per-color overrides and ensures consistent appearance across sections. */
.theme-dark [class*="bg-"][class*="-50"],
.theme-dark [class*="bg-"][class*="-100"],
.theme-dark [class*="bg-"][class*="-200"] {
  background-color: var(--brand-surface) !important;
  color: #ffffff !important;
  border-color: rgba(255,255,255,0.06) !important;
}
.theme-dark [class*="bg-"][class*="-50"] h3,
.theme-dark [class*="bg-"][class*="-100"] h3,
.theme-dark [class*="bg-"][class*="-200"] h3,
.theme-dark [class*="bg-"][class*="-50"] label,
.theme-dark [class*="bg-"][class*="-100"] label,
.theme-dark [class*="bg-"][class*="-200"] label,
.theme-dark [class*="bg-"][class*="-50"] .text-sm.font-medium,
.theme-dark [class*="bg-"][class*="-100"] .text-sm.font-medium,
.theme-dark [class*="bg-"][class*="-200"] .text-sm.font-medium {
  color: #ffffff !important;
}

/* User manual modal transform (moved from inline styles to CSS to satisfy linter) */
.user-manual-modal {
  transform: scale(0.95);
  transition: transform 180ms ease;
}
.user-manual-modal.open {
  transform: scale(1);
}

/* Buttons for scenario backup/restore */
.btn-download {
  background-color: #8595d4;
  color: #ffffff;
}
.btn-download:hover {
  filter: brightness(0.95);
}
.btn-upload {
  background-color: #85d48d;
  color: #ffffff;
}
.btn-upload:hover {
  filter: brightness(0.95);
}

/* Improve left-nav text contrast in dark mode for the user manual */
.theme-dark .user-manual-nav button {
  color: #ffffff !important;
}
.theme-dark .user-manual-nav button:hover {
  background-color: rgba(255,255,255,0.04) !important;
}
.theme-dark .user-manual-nav button .text-indigo-700,
.theme-dark .user-manual-nav button .text-gray-600 {
  color: #ffffff !important;
}

/* Monte Carlo outcomes - prevent generic override, maintain specific colors */
.bg-gray-50 .text-red-700 {
  color: #b91c1c !important;
}
.bg-gray-50 .text-blue-700 {
  color: #1d4ed8 !important;
}
.bg-gray-50 .text-green-700 {
  color: #15803d !important;
}
.theme-dark .bg-gray-50 .text-red-400,
.theme-dark .bg-gray-50 .text-red-300 {
  color: #f87171 !important;
}
.theme-dark .bg-gray-50 .text-gray-300,
.theme-dark .bg-gray-50 .text-gray-200 {
  color: #d1d5db !important;
}
.theme-dark .bg-gray-50 .text-green-400,
.theme-dark .bg-gray-50 .text-green-300 {
  color: #4ade80 !important;
}

/* Indicator card icons - override dark mode to use brand purple */
.theme-dark .rounded-full.bg-green-500,
.theme-dark .rounded-full.bg-indigo-500,
.theme-dark .rounded-full.bg-red-500,
.theme-dark .rounded-full.bg-yellow-500 {
  background-color: #6366f1 !important;
}

/* Projection table - prevent dark mode override on table rows */
table tr.bg-gray-50 {
  background-color: #f9fafb !important;
  color: #1f2937 !important;
}
.theme-dark table tr.bg-gray-50 {
  background-color: #1f2937 !important;
  color: #e5e7eb !important;
}

/* Projection table colored columns - override the generic bg-*-50 rules */
.projection-col-gifts {
  background-color: #fef9c3 !important;
  color: #713f12 !important;
}
.theme-dark .projection-col-gifts {
  background-color: #713f12 !important;
  color: #fde047 !important;
}

.projection-col-income {
  background-color: #dbeafe !important;
  color: #1e3a8a !important;
}
.theme-dark .projection-col-income {
  background-color: #1e3a8a !important;
  color: #bfdbfe !important;
}

.projection-col-tax {
  background-color: #fee2e2 !important;
  color: #7f1d1d !important;
}
.theme-dark .projection-col-tax {
  background-color: #7f1d1d !important;
  color: #fecaca !important;
}

.projection-col-netincome {
  background-color: #dcfce7 !important;
  color: #14532d !important;
}
.theme-dark .projection-col-netincome {
  background-color: #14532d !important;
  color: #bbf7d0 !important;
}

/* AI insights paragraph spacing: give paragraphs breathing room */
.ai-insights p {
  margin-bottom: 1rem;
  line-height: 1.6;
}

/* Headings inside AI insights: make them stand out from body text */
.ai-insights h1,
.ai-insights h2,
.ai-insights h3,
.ai-insights h4 {
  margin-top: 1rem;
  margin-bottom: 0.5rem;
  font-weight: 700;
  color: var(--brand-text-primary);
  line-height: 1.25;
}

.ai-insights h1 { font-size: 1.5rem; }
.ai-insights h2 { font-size: 1.25rem; }
.ai-insights h3 { font-size: 1.125rem; }
.ai-insights h4 { font-size: 1rem; }

/* Slightly smaller and muted for subheadings in the insights */
.ai-insights h5,
.ai-insights h6 {
  margin-top: 0.75rem;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: var(--brand-text-secondary);
}

/* Ensure links inside insights are visible and underlined */
.ai-insights a {
  color: var(--brand-primary);
  text-decoration: underline;
}
