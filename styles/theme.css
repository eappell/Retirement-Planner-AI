:root {
  --brand-background: #f1f5f9; /* slate-100 */
  --brand-surface: #ffffff; /* white */
  --brand-primary: #4f46e5; /* indigo-600 */
  --brand-secondary: #0ea5e9; /* sky-500 */
  --brand-text-primary: #1e293b; /* slate-800 */
  --brand-text-secondary: #64748b; /* slate-500 */
}

.theme-dark {
  --brand-background: #070f25; /* page background color */
  --brand-surface: #2d3648; /* section background color */
  --brand-primary: #6366f1; /* indigo-500 */
  --brand-secondary: #60a5fa; /* sky-400 */
  --brand-text-primary: #e6eef8; /* light text */
  --brand-text-secondary: #9fb4d6; /* muted light */
}

/* Smooth transition for theme changes */
html, body {
  transition: background-color 200ms ease, color 200ms ease;
  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'system-ui', Roboto, '"Helvetica Neue"', Arial, '"Noto Sans"', sans-serif;
} 

/* Ensure Tailwind utilities that rely on colors inherit from CSS variables */
.bg-brand-background { background-color: var(--brand-background) !important; }
.bg-brand-surface { background-color: var(--brand-surface) !important; }
.text-brand-text-primary { color: var(--brand-text-primary) !important; }
.text-brand-text-secondary { color: var(--brand-text-secondary) !important; }
.text-brand-primary { color: var(--brand-primary) !important; }
.bg-brand-primary { background-color: var(--brand-primary) !important; }
.bg-brand-secondary { background-color: var(--brand-secondary) !important; }

/* Dark mode tweaks: make card surfaces distinguishable from background */
.theme-dark .bg-brand-surface,
.theme-dark .bg-white {
  background-color: var(--brand-surface) !important;
}

/* Lighten common "card" gray utilities slightly in dark mode so they stand out */
.theme-dark .bg-gray-50 { background-color: rgba(255,255,255,0.03) !important; }
.theme-dark .bg-gray-100 { background-color: rgba(255,255,255,0.04) !important; }
.theme-dark .bg-gray-200 { background-color: rgba(255,255,255,0.06) !important; }

/* Ensure muted gray text utilities are readable in dark mode: map them to lighter brand text */
.theme-dark .text-gray-500,
.theme-dark .text-gray-600,
.theme-dark .text-gray-700,
.theme-dark .text-gray-400 {
  color: var(--brand-text-secondary) !important;
}

/* Also ensure small helper text uses readable muted light color */
.theme-dark .text-sm {
  color: var(--brand-text-secondary) !important;
}

/* Make all labels and small-bold labels white in dark mode so they are prominent */
.theme-dark label,
.theme-dark .text-sm.font-medium,
.theme-dark .text-sm.font-semibold {
  color: #ffffff !important;
}

/* Tabs: make inactive tab text muted but readable, and selected tab brighter */
.theme-dark .ml-4.inline-flex button,
.theme-dark .tabs button,
.theme-dark .tab-button {
  color: var(--brand-text-secondary) !important;
}

/* Selected tab should be the section color but brighter and slightly elevated */
.theme-dark .bg-brand-primary.text-white,
.theme-dark .tab-selected.bg-brand-primary.text-white {
  filter: brightness(1.12) !important;
  box-shadow: 0 6px 18px rgba(99,102,241,0.16) !important;
}

/* Ensure that when tabs are not selected they remain readable on surface */
.theme-dark .bg-transparent {
  color: var(--brand-text-secondary) !important;
}

/* Ensure items that use gray backgrounds keep readable labels in dark mode */
.theme-dark .bg-gray-50,
.theme-dark .bg-gray-100,
.theme-dark .bg-gray-200,
.theme-dark .bg-gray-300 {
  color: var(--brand-text-primary) !important;
}

/* For elements that intentionally use gray backgrounds for neutral UI controls,
   make their textual labels darker for contrast as requested (e.g., account buttons).
   We set the label color to near-black on those gray backgrounds to improve legibility. */
.theme-dark .bg-gray-200,
.theme-dark .bg-gray-100 {
  --card-label-color: #000000;
}
.theme-dark .bg-gray-200 .text-sm.font-medium,
.theme-dark .bg-gray-100 .text-sm.font-medium,
.theme-dark .bg-gray-200 label,
.theme-dark .bg-gray-100 label {
  color: var(--card-label-color) !important;
}

/* Unified section styling: make all section-like utility backgrounds match the
   card surface and use white text for legibility in dark mode. This simplifies
   per-color overrides and ensures consistent appearance across sections. */
.theme-dark [class*="bg-"][class*="-50"],
.theme-dark [class*="bg-"][class*="-100"],
.theme-dark [class*="bg-"][class*="-200"] {
  background-color: var(--brand-surface) !important;
  color: #ffffff !important;
  border-color: rgba(255,255,255,0.06) !important;
}
.theme-dark [class*="bg-"][class*="-50"] h3,
.theme-dark [class*="bg-"][class*="-100"] h3,
.theme-dark [class*="bg-"][class*="-200"] h3,
.theme-dark [class*="bg-"][class*="-50"] label,
.theme-dark [class*="bg-"][class*="-100"] label,
.theme-dark [class*="bg-"][class*="-200"] label,
.theme-dark [class*="bg-"][class*="-50"] .text-sm.font-medium,
.theme-dark [class*="bg-"][class*="-100"] .text-sm.font-medium,
.theme-dark [class*="bg-"][class*="-200"] .text-sm.font-medium {
  color: #ffffff !important;
}

/* User manual modal transform (moved from inline styles to CSS to satisfy linter) */
.user-manual-modal {
  transform: scale(0.95);
  transition: transform 180ms ease;
}
.user-manual-modal.open {
  transform: scale(1);
}

/* Buttons for scenario backup/restore */
.btn-download {
  background-color: #8595d4;
  color: #ffffff;
}
.btn-download:hover {
  filter: brightness(0.95);
}
.btn-upload {
  background-color: #85d48d;
  color: #ffffff;
}
.btn-upload:hover {
  filter: brightness(0.95);
}

/* Improve left-nav text contrast in dark mode for the user manual */
.theme-dark .user-manual-nav button {
  color: #ffffff !important;
}
.theme-dark .user-manual-nav button:hover {
  background-color: rgba(255,255,255,0.04) !important;
}
.theme-dark .user-manual-nav button .text-indigo-700,
.theme-dark .user-manual-nav button .text-gray-600 {
  color: #ffffff !important;
}

/* Monte Carlo outcomes - prevent generic override, maintain specific colors */
.bg-gray-50 .text-red-700 {
  color: #b91c1c !important;
}
.bg-gray-50 .text-blue-700 {
  color: #1d4ed8 !important;
}
.bg-gray-50 .text-green-700 {
  color: #1baa50 !important;
}
.theme-dark .bg-gray-50 .text-red-400,
.theme-dark .bg-gray-50 .text-red-300 {
  color: #f87171 !important;
}
.theme-dark .bg-gray-50 .text-gray-300,
.theme-dark .bg-gray-50 .text-gray-200 {
  color: #d1d5db !important;
}
.theme-dark .bg-gray-50 .text-green-400,
.theme-dark .bg-gray-50 .text-green-300,
.theme-dark .bg-gray-50 .text-green-200 {
  color: #bbf7d0 !important;
}

/* Indicator card icons - override dark mode to use brand purple */
.theme-dark .rounded-full.bg-green-500,
.theme-dark .rounded-full.bg-indigo-500,
.theme-dark .rounded-full.bg-red-500,
.theme-dark .rounded-full.bg-yellow-500 {
  background-color: #6366f1 !important;
}

/* Projection table - prevent dark mode override on table rows */
table tr.bg-gray-50 {
  background-color: #f9fafb !important;
  color: #1f2937 !important;
}
.theme-dark table tr.bg-gray-50 {
  background-color: #1f2937 !important;
  color: #e5e7eb !important;
}

/* Remove thin separator that can appear between the header and the first row.
   This clears any border on the header's bottom or the first row's top. */
table thead th {
  border-bottom: none !important;
}
table tbody tr:first-child td {
  border-top: none !important;
}
.theme-dark table thead th {
  border-bottom: none !important;
}
.theme-dark table tbody tr:first-child td {
  border-top: none !important;
}

/* Additional resets to cover borders/shadows applied to the thead or tr itself */
table thead, table thead tr, table thead th {
  border-bottom: none !important;
  box-shadow: none !important;
}
table tbody tr:first-child, table tbody tr:first-child td {
  border-top: none !important;
  box-shadow: none !important;
}
.theme-dark table thead, .theme-dark table thead tr, .theme-dark table thead th {
  border-bottom: none !important;
  box-shadow: none !important;
}
.theme-dark table tbody tr:first-child, .theme-dark table tbody tr:first-child td {
  border-top: none !important;
  box-shadow: none !important;
}

/* Target the projection table specifically to remove any internal border that may remain */
.projection-table {
  border: none !important;
  border-collapse: separate !important; /* separate prevents collapsed borders showing through */
}
.projection-table thead th,
.projection-table thead,
.projection-table thead tr {
  border-bottom: 0 !important;
  box-shadow: none !important;
}
.projection-table tbody tr:first-child td,
.projection-table tbody tr:first-child {
  border-top: 0 !important;
  box-shadow: none !important;
}
.theme-dark .projection-table thead th,
.theme-dark .projection-table thead,
.theme-dark .projection-table thead tr {
  border-bottom: 0 !important;
}
.theme-dark .projection-table tbody tr:first-child td,
.theme-dark .projection-table tbody tr:first-child {
  border-top: 0 !important;
}

/* Ensure hover highlights work even when the base rule uses !important.
   Light mode: hover -> bg-gray-100. Dark mode: hover -> gray-700. */
table tr.bg-gray-50:hover {
  background-color: #e5e7eb !important; /* tailwind bg-gray-200 - slightly darker */
}
.theme-dark table tr.bg-gray-50:hover {
  background-color: #111827 !important; /* tailwind gray-900 - noticeably darker in dark mode */
}

/* Base projection popover positioning uses CSS variables so the tooltip can be positioned
   relative to the cursor without writing left/top inline values that may trigger linter rules. */
.projection-popover {
  position: absolute;
  left: 0;
  top: 0;
  pointer-events: auto; /* allow clicking inside popover (close button) */
  transform: translate(var(--tp-x, 0), var(--tp-y, 0));
  will-change: transform;
}

/* In dark theme, prefer a lighter tooltip background with dark text for legibility. Also support the .dark class variant. */
.theme-dark .projection-popover,
.dark .projection-popover {
  background-color: #f8fafc !important; /* light surface */
  color: #0f172a !important; /* dark text */
  border-color: rgba(15,23,42,0.06) !important;
}
.theme-dark .projection-popover button,
.dark .projection-popover button {
  color: #0f172a !important;
}
.theme-dark .projection-popover .text-gray-400,
.theme-dark .projection-popover .text-gray-500,
.theme-dark .projection-popover .text-gray-600,
.dark .projection-popover .text-gray-400,
.dark .projection-popover .text-gray-500,
.dark .projection-popover .text-gray-600 {
  color: #475569 !important; /* slate-600 for muted labels */
}

/* Swatches inside the projection popover: explicit colors so they're visible in both themes */
/* Default (app in light mode): make the popover dark with light text (inverted behavior) */
.projection-popover {
  background-color: #0b1220 !important; /* dark navy */
  color: #e6eef8 !important; /* light text */
  border-color: rgba(255,255,255,0.06) !important;
}
.projection-popover .swatch {
  width: 0.75rem;
  height: 0.75rem;
  display: inline-block;
  border-radius: 0.125rem;
  box-shadow: 0 1px 0 rgba(0,0,0,0.05) inset;
}
.projection-popover .swatch-indigo { background-color: #6366f1 !important; }
.projection-popover .swatch-green { background-color: #22c55e !important; }
.projection-popover .swatch-indigo-light { background-color: #818cf8 !important; }
.projection-popover .swatch-red { background-color: #ef4444 !important; }
.projection-popover .swatch-amber { background-color: #f59e0b !important; }
.projection-popover .swatch-red-dark { background-color: #dc2626 !important; }
.projection-popover .swatch-green-dark { background-color: #16a34a !important; }

/* Ensure popover text values use light color by default (for dark popover) */
.projection-popover .font-medium { color: #e6eef8 !important; }

/* Label color: light labels by default (app light mode with dark popover), but muted in .theme-dark*/
.projection-popover .projection-popover-label { color: #e6eef8 !important; }
.theme-dark .projection-popover .projection-popover-label,
.dark .projection-popover .projection-popover-label { color: #475569 !important; }

/* When the app is in dark mode, invert the popover to a light background with dark text */
.theme-dark .projection-popover,
.dark .projection-popover {
  background-color: #f8fafc !important; /* light surface */
  color: #0f172a !important; /* dark text */
  border-color: rgba(15,23,42,0.06) !important;
}
.theme-dark .projection-popover .font-medium,
.dark .projection-popover .font-medium {
  color: #0f172a !important;
}
.theme-dark .projection-popover .text-gray-400,
.theme-dark .projection-popover .text-gray-500,
.theme-dark .projection-popover .text-gray-600,
.dark .projection-popover .text-gray-400,
.dark .projection-popover .text-gray-500,
.dark .projection-popover .text-gray-600 {
  color: #475569 !important; /* slate-600 for muted labels */
}

/* Projection table colored columns - override the generic bg-*-50 rules */
.projection-col-gifts {
  background-color: #fef9c3 !important;
  color: #713f12 !important;
}
.theme-dark .projection-col-gifts {
  background-color: #713f12 !important;
  color: #fde047 !important;
}

.projection-col-income {
  background-color: #dbeafe !important;
  color: #1e3a8a !important;
}
.theme-dark .projection-col-income {
  background-color: #1e3a8a !important;
  color: #bfdbfe !important;
}

.projection-col-tax {
  background-color: #fee2e2 !important;
  color: #7f1d1d !important;
}
.theme-dark .projection-col-tax {
  background-color: #7f1d1d !important;
  color: #fecaca !important;
}

.projection-col-netincome {
  background-color: #dcfce7 !important;
  color: #14532d !important;
}
.theme-dark .projection-col-netincome {
  background-color: #14532d !important;
  color: #bbf7d0 !important;
}

/* Smooth background transition for colored projection cells */
.projection-col-gifts,
.projection-col-income,
.projection-col-tax,
.projection-col-netincome {
  transition: background-color 120ms ease;
}

/* Darken colored cells when the row is hovered (light mode) */
table tr.bg-gray-50:hover td.projection-col-gifts {
  background-color: #fef08a !important; /* slightly darker yellow */
}
table tr.bg-gray-50:hover td.projection-col-income {
  background-color: #bfdbfe !important; /* slightly darker blue */
}
table tr.bg-gray-50:hover td.projection-col-tax {
  background-color: #fecaca !important; /* slightly darker red */
}
table tr.bg-gray-50:hover td.projection-col-netincome {
  background-color: #bbf7d0 !important; /* slightly darker green */
}

/* Dark mode: use deeper/darker shades for hover so contrast remains clear */
.theme-dark table tr.bg-gray-50:hover td.projection-col-gifts {
  background-color: #5c2f0e !important;
  color: #fde047 !important;
}
.theme-dark table tr.bg-gray-50:hover td.projection-col-income {
  background-color: #0f2a5a !important;
  color: #bfdbfe !important;
}
.theme-dark table tr.bg-gray-50:hover td.projection-col-tax {
  background-color: #5a1212 !important;
  color: #fecaca !important;
}
.theme-dark table tr.bg-gray-50:hover td.projection-col-netincome {
  background-color: #0f3921 !important;
  color: #bbf7d0 !important;
}

/* AI insights paragraph spacing: give paragraphs breathing room */
.ai-insights p {
  margin-bottom: 1rem;
  line-height: 1.6;
}

/* Headings inside AI insights: make them stand out from body text */
.ai-insights h1,
.ai-insights h2,
.ai-insights h3,
.ai-insights h4 {
  margin-top: 1rem;
  margin-bottom: 0.5rem;
  font-weight: 700;
  color: var(--brand-text-primary);
  line-height: 1.25;
}

.ai-insights h1 { font-size: 1.5rem; }
.ai-insights h2 { font-size: 1.25rem; }
.ai-insights h3 { font-size: 1.125rem; }
.ai-insights h4 { font-size: 1rem; }

/* Slightly smaller and muted for subheadings in the insights */
.ai-insights h5,
.ai-insights h6 {
  margin-top: 0.75rem;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: var(--brand-text-secondary);
}

/* Ensure links inside insights are visible and underlined */
.ai-insights a {
  color: var(--brand-primary);
  text-decoration: underline;
}

/*
  Use Arial/Helvetica for any text that is rendered with a heavy weight (>=600).
  This targets headings and the common Tailwind utility classes that apply
  heavier fonts so bold text uses the fallback sans stack instead of 'Segoe UI'.
*/
h1, h2, h3, h4, h5, h6,
.font-semibold, .font-bold, .font-extrabold, .font-black,
strong, b,
[class*="font-600"], [class*="font-700"], [class*="font-800"], [class*="font-900"],
[style*="font-weight: 600"], [style*="font-weight:600"],
[style*="font-weight: 700"], [style*="font-weight:700"],
[style*="font-weight: 800"], [style*="font-weight:800"],
[style*="font-weight: 900"], [style*="font-weight:900"] {
  font-family: Arial, Helvetica, sans-serif !important;
}

/* Ensure interactive controls show the pointer cursor so users get proper affordance. */
/* Targets anchors, buttons, form buttons, and common interactive macros used in the app. */
/* Also include child elements (icons/spans) so svg or inner spans inherit pointer. */
/* Do not override disabled controls â€” they should show not-allowed. */
/* Note: Adding child selectors handles cases where an SVG or span inside a button is the hovered element. */
a, a[href], a *, button, button *, input[type="button"], input[type="submit"], input[type="reset"],
[role="button"], [role="button"] *, .btn, .btn *, .action-button, .action-button *, .clickable, .clickable * {
  cursor: pointer !important;
}

button:disabled, button[disabled], input[disabled], [disabled] {
  cursor: not-allowed !important;
}
